// @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&dn=expat.txt Expat
// Source: https://retropage.co/retropage-source.js
window.onload=function(){var e=document.getElementById("darktoggle"),t=document.getElementById("searchbox"),o=document.getElementById("submitsearch"),l=document.getElementById("optionsbtn"),a=document.getElementById("options-box"),c=document.getElementById("opencssmodal"),s=document.getElementById("cssmodalclose"),n=document.getElementById("cssmodal"),m=document.getElementById("csssubmit"),r=document.getElementById("cssclear"),u=document.getElementById("customcssinput"),d=localStorage.getItem("customcss"),i=document.getElementById("openlogomodal"),g=document.getElementById("logomodal"),y=document.getElementById("logourlnotvalid"),p=document.getElementById("logomodalclose"),h=document.getElementById("logosubmit"),I=document.getElementById("logoclear"),S=document.getElementById("logourl"),v=localStorage.getItem("logourl"),k=document.getElementById("searchmodal"),f=document.getElementById("opensearchmodal"),E=document.getElementById("searchname"),B=document.getElementById("searchurl"),b=document.getElementById("customsearchsubmit"),w=document.getElementById("customsearchclear"),x=document.getElementById("searchmodalclose"),j=document.getElementById("csurlnotvalid"),K=localStorage.getItem("customsearchname"),D=localStorage.getItem("customsearchurl"),P=document.getElementById("kbdmodal"),q=document.getElementById("openkbdmodal"),z=document.getElementById("kbd-mac"),M=document.getElementById("kbd-other"),C=document.getElementById("kbdmodalclose"),G=document.getElementById("jsmodal"),J=document.getElementById("openjsmodal"),N=document.getElementById("customjsinput"),O=document.getElementById("jsmodalclose"),L=document.getElementById("jssubmit"),Y=document.getElementById("jsclear"),A=localStorage.getItem("customjs"),F=document.getElementById("exportmodal"),H=document.getElementById("openexportmodal"),Q=document.getElementById("exportmodalclose"),R=document.getElementById("exportmodaldone"),T=document.getElementById("export-pg1"),U=document.getElementById("export-pg2"),V=document.getElementById("export-pg3"),W=document.getElementById("export-pg4"),X=document.getElementById("export-import"),Z=document.getElementById("export-export"),_=document.getElementById("submitimport"),ee=document.getElementById("importdata"),te=document.getElementById("importmodaldone"),oe=document.getElementById("importinvalidjson"),le=localStorage.getItem("themestatus"),ae=localStorage.getItem("selectedengine"),ce=localStorage.getItem("customsearchset"),se=0,ne=0,me=0,re=0,ue=0,de=0,ie=0,ge={customcss:localStorage.getItem("customcss"),customjs:localStorage.getItem("customjs"),customsearchname:localStorage.getItem("customsearchname"),customsearchset:localStorage.getItem("customsearchset"),customsearchurl:localStorage.getItem("customsearchurl"),logourl:localStorage.getItem("logourl"),selectedengine:localStorage.getItem("selectedengine"),themestatus:localStorage.getItem("themestatus")};function ye(){a.style.display="none",se=0,n.style.display="none",ne=0,G.style.display="none",me=0,g.style.display="none",re=0,k.style.display="none",ue=0,P.style.display="none",de=0,F.style.display="none",ie=0}function pe(){var e=document.searchbox;return D=localStorage.getItem("customsearchurl"),"google"==(ae=localStorage.getItem("selectedengine"))?(window.location.href="https://encrypted.google.com/#q="+escape(e.searchtext.value),!1):"bing"==ae?(window.location.href="https://www.bing.com/search?q="+escape(e.searchtext.value),!1):"yahoo"==ae?(window.location.href="https://search.yahoo.com/search?p="+escape(e.searchtext.value),!1):"ddg"==ae?(window.location.href="https://duckduckgo.com/?q="+escape(e.searchtext.value),!1):"startpage"==ae?(window.location.href="https://www.startpage.com/do/search?query="+escape(e.searchtext.value),!1):"searx"==ae?(window.location.href="https://searx.me/?q="+escape(e.searchtext.value)+"&categories=general",!1):"ixquick"==ae?(window.location.href="https://www.ixquick.eu/do/search?query="+escape(e.searchtext.value),!1):"custom"==ae?(window.location.href=D+escape(e.searchtext.value),!1):void 0}function he(){var e=$("#searchoption").val();if("google"==e)$('input[name="searchtext"]').attr("placeholder","Google Search"),localStorage.setItem("selectedengine","google"),ae=localStorage.getItem("selectedengine");else if("bing"==e)$('input[name="searchtext"]').attr("placeholder","Bing Search"),localStorage.setItem("selectedengine","bing"),ae=localStorage.getItem("selectedengine");else if("yahoo"==e)$('input[name="searchtext"]').attr("placeholder","Yahoo Search"),localStorage.setItem("selectedengine","yahoo"),ae=localStorage.getItem("selectedengine");else if("ddg"==e)$('input[name="searchtext"]').attr("placeholder","DuckDuckGo Search"),localStorage.setItem("selectedengine","ddg"),ae=localStorage.getItem("selectedengine");else if("startpage"==e)$('input[name="searchtext"]').attr("placeholder","StartPage Search"),localStorage.setItem("selectedengine","startpage"),ae=localStorage.getItem("selectedengine");else if("searx"==e)$('input[name="searchtext"]').attr("placeholder","Searx Search"),localStorage.setItem("selectedengine","searx"),ae=localStorage.getItem("selectedengine");else if("ixquick"==e)$('input[name="searchtext"]').attr("placeholder","Ixquick.eu Search"),localStorage.setItem("selectedengine","ixquick"),ae=localStorage.getItem("selectedengine");else if("custom"==e){localStorage.setItem("selectedengine","custom");var t=(K=localStorage.getItem("customsearchname"))+" search";$('input[name="searchtext"]').attr("placeholder",t)}}function Ie(){0===le?(le=1,localStorage.setItem("themestatus","1"),$("link[title=darktheme]")[0].disabled=!1):1==le?(le=0,localStorage.setItem("themestatus","0"),$("link[title=darktheme]")[0].disabled=!0):2==le&&(le=0,localStorage.setItem("themestatus","0"),$("link[title=darktheme]")[0].disabled=!0,$("#customstyling").remove())}function Se(){0===ne?(ye(),n.style.display="block",ne=1,a.style.display="none",se=0,$('textarea[name="customcssinput"]').val(localStorage.getItem("customcss"))):ye()}function ve(){0===me?(ye(),G.style.display="block",me=1,a.style.display="none",se=0,$('textarea[name="customjsinput"]').val(localStorage.getItem("customjs"))):ye()}function ke(){0===re?(ye(),g.style.display="block",re=1,a.style.display="none",se=0,$('textarea[name="customcssinput"]').val(localStorage.getItem("customcss"))):ye()}function fe(){0===ue?(ye(),k.style.display="block",ue=1,$("#searchname").val(localStorage.getItem("customsearchname")),$("#searchurl").val(localStorage.getItem("customsearchurl"))):(k.style.display="none",ue=0)}function Ee(){0===de?"Mac68K"==window.navigator.platform||"MacPPC"==window.navigator.platform||"MacIntel"==window.navigator.platform?(ye(),P.style.display="block",de=1,z.style.display="block",M.style.display="none"):(ye(),P.style.display="block",de=1,z.style.display="none",M.style.display="block"):(P.style.display="none",de=0)}function Be(){0===ie?(ye(),F.style.display="block",T.style.display="block",oe.style.display="none",ie=1,1,a.style.display="none",U.style.display="none",V.style.display="none",W.style.display="none",se=0):ye()}t.onsubmit=pe,o.onclick=pe,searchoption.onchange=he,null!==localStorage.getItem("selectedengine")?1==ce?($("#searchoption").append('<option value="custom">'+localStorage.getItem("customsearchname")+"</option>"),"custom"==ae?($("#searchoption").val("custom"),he()):(searchoption.value=localStorage.getItem("selectedengine"),he())):(searchoption.value=localStorage.getItem("selectedengine"),he()):($("#searchoption").val("google"),localStorage.setItem("selectedengine","google"),he()),0===le?$("link[title=darktheme]")[0].disabled=!0:1==le?$("link[title=darktheme]")[0].disabled=!1:2==le?($("head").append('<style id="customstyling">'+d+"</style>"),$("link[title=darktheme]")[0].disabled=!0):($("link[title=darktheme]")[0].disabled=!0,localStorage.setItem("themestatus","0"),le=0),null!==localStorage.getItem("darkmodeon")&&(localStorage.setItem("themestatus",localStorage.getItem("darkmodeon")),localStorage.removeItem("darkmodeon")),(1==ce&&null==K||void 0==K||null==D||void 0==D)&&localStorage.removeItem("customsearchset"),l.onclick=function(){0===se?(ye(),a.style.display="block",se=1):ye()},window.addEventListener("click",function(e){document.getElementById("options-content").contains(e.target)||document.getElementById("optionsbtn").contains(e.target)||(document.getElementById("options-box").style.display="none",se=0)}),e.onclick=Ie,c.onclick=Se,s.onclick=ye,m.onclick=function(){return""!==u.value&&"null"!==u.value?(localStorage.setItem("customcss",u.value),$("#customstyling").remove(),$("head").append('<style id="customstyling">'+u.value+"</style>"),le=2,localStorage.setItem("themestatus","2"),$("link[title=darktheme]")[0].disabled=!0,ye(),!1):(localStorage.removeItem("customcss"),$("#customstyling").remove(),localStorage.setItem("themestatus","0"),ye(),!1)},r.onclick=function(){return localStorage.removeItem("customcss"),$("#customstyling").remove(),localStorage.setItem("themestatus","0"),ye(),!1},J.onclick=ve,O.onclick=ye,L.onclick=function(){return""!==N.value&&"null"!==N.value?(localStorage.setItem("customjs",N.value),$("#customjs").remove(),ye(),location.reload(),!1):(localStorage.removeItem("customjs"),$("#customjs").remove(),ye(),location.reload(),!1)},Y.onclick=function(){return localStorage.removeItem("customjs"),$("#customjs").remove(),ye(),location.reload(),!1},"null"!==A&&""!==A&&null!==A&&$("head").append('<script id="customjs">'+A+"<\/script>"),i.onclick=ke,p.onclick=ye,h.onclick=function(){return""!==S.value&&"null"!==S.value?/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test($("#logourl").val())?(localStorage.setItem("logourl",S.value),$("#logo").attr("src",S.value),y.style.display="none",ye(),!1):(y.style.display="block",!1):(localStorage.removeItem("logourl"),ye(),location.reload(),!1)},I.onclick=function(){return localStorage.removeItem("logourl"),ye(),location.reload(),!1},null!==v&&""!==v&&$("#logo").attr("src",v),f.onclick=fe,x.onclick=ye,b.onclick=function(){return""!==E&&"null"!==E&&/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test($("#searchurl").val())?(j.style.display="none",localStorage.removeItem("customsearchname"),localStorage.removeItem("customsearchurl"),localStorage.removeItem("selectedengine"),localStorage.setItem("customsearchname",E.value),localStorage.setItem("customsearchurl",B.value),localStorage.setItem("customsearchset","1"),$("#searchoption option[value='custom']").remove(),localStorage.setItem("selectedengine","custom"),$("#searchoption").append('<option value="custom">'+E.value+"</option>"),$("#searchoption").val("custom"),he(),ye(),!1):""!==B.value&&"null"!==B.value?(j.style.display="block",!1):void 0},w.onclick=function(){return localStorage.removeItem("customsearchname"),localStorage.removeItem("customsearchurl"),$("#searchoption").val("google"),$("#searchoption option[value='custom']").remove(),localStorage.setItem("selectedengine","google"),he(),ye(),!1},q.onclick=Ee,C.onclick=ye,H.onclick=Be,Q.onclick=ye,R.onclick=ye,X.onclick=function(){T.style.display="none",U.style.display="block",V.style.display="none",W.style.display="none",oe.style.display="none"},_.onclick=function(){try{ee=document.getElementById("importdata");var e=JSON.parse(ee.value);return null!==e.customcss&&localStorage.setItem("customcss",e.customcss),null!==e.customjs&&localStorage.setItem("customjs",e.customjs),null!==e.customsearchname&&localStorage.setItem("customsearchname",e.customsearchname),null!==e.customsearchset&&localStorage.setItem("customsearchset",e.customsearchset),null!==e.customsearchurl&&localStorage.setItem("customsearchurl",e.customsearchurl),null!==e.logourl&&localStorage.setItem("logourl",e.logourl),null!==e.selectedengine&&localStorage.setItem("selectedengine",e.selectedengine),null!==e.themestatus&&localStorage.setItem("themestatus",e.themestatus),T.style.display="none",U.style.display="none",V.style.display="none",W.style.display="block",$("#exportmodalclose").remove(),!1}catch(e){return oe.style.display="block",!1}},te.onclick=function(){location.reload()},Z.onclick=function(){T.style.display="none",U.style.display="none",V.style.display="block",W.style.display="none",3,ge={customcss:localStorage.getItem("customcss"),customjs:localStorage.getItem("customjs"),customsearchname:localStorage.getItem("customsearchname"),customsearchset:localStorage.getItem("customsearchset"),customsearchurl:localStorage.getItem("customsearchurl"),logourl:localStorage.getItem("logourl"),selectedengine:localStorage.getItem("selectedengine"),themestatus:localStorage.getItem("themestatus")},document.getElementById("exportdata").value=JSON.stringify(ge)},document.onkeydown=function(e){e.ctrlKey&&e.altKey&&222==e.which?(e.preventDefault(),e.stopPropagation(),Ie()):e.ctrlKey&&e.altKey&&59==e.which||e.ctrlKey&&e.altKey&&186==e.which?(e.preventDefault(),e.stopPropagation(),Se()):e.ctrlKey&&e.altKey&&76==e.which?(e.preventDefault(),e.stopPropagation(),ke()):e.ctrlKey&&e.altKey&&75==e.which?(e.preventDefault(),e.stopPropagation(),ve()):e.ctrlKey&&e.altKey&&74==e.which?(e.preventDefault(),e.stopPropagation(),fe()):e.ctrlKey&&e.altKey&&72==e.which?(e.preventDefault(),e.stopPropagation(),Be()):e.ctrlKey&&e.altKey&&82==e.which?(e.preventDefault(),e.stopPropagation(),window.location.href="/reset"):e.ctrlKey&&e.altKey&&83==e.which?(e.preventDefault(),e.stopPropagation(),Ee()):e.ctrlKey&&e.altKey&&88==e.which&&(e.preventDefault(),e.stopPropagation(),ye())},$("textarea").keydown(function(e){if(9===e.keyCode){var t=this.selectionStart,o=this.selectionEnd,l=$(this),a=l.val();l.val(a.substring(0,t)+"\t"+a.substring(o)),this.selectionStart=this.selectionEnd=t+1,e.preventDefault()}})};
// @license-end